<div class="card">
    <div class="imagen-completa">
        <img src="../../../assets/logos/LOGO-2.png" alt="Foto de perfil" height="120" >

        <div class="menu-item-right">
            <img src="https://cdn-icons-png.flaticon.com/512/20/20079.png" alt="Foto de perfil" class="profile-pic" (click)="verPerfil()">
            <span style="color: #167496; font-family: 'Monserrat'">¡Hola de nuevo {{ usuario.nombre }}!</span>
            <div>
                <a href="#" (click)="logOut()" style="color: #167496; font-family: 'Monserrat'">Cerrar sesión</a>
            </div>
        </div>
    </div>
    
    <div class="menu-container">
        <div class="menu-item-right-1 ml-2">
            <a href="#" [routerLink]="'/foroprofesionales'" style="color: white; font-family: 'Monserrat'">Foro Profesionales</a>
            <a href="#" [routerLink]="'/forousuarios'" class="ml-3" style="color: white; font-family: 'Monserrat'">Foro Usuarios</a>
        </div>

        <div class="menu-item-left mb-4 mr-4">
            <p-dropdown class="d-flex flex-align-center" [style]="{'width': '22rem'}" placeholder="Buscar perfiles..." 
                [options]="users$ | async" [filter]="true" filterBy="nombre" appendTo="body" optionLabel="nombre" 
                [(ngModel)]="selectedPerfil" (onChange)="buscar()">
                <ng-template let-country pTemplate="item">
                    <div class="flex align-items-center gap-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/20/20079.png" style="width: 18px" />
                    <div>{{ country.nombre }} {{country.apellidos}}</div>
                    </div>
                </ng-template>
            </p-dropdown>
        </div>
    </div>   
</div>
<ng-container *ngIf="usuario.rol == 2">
    <div class="homepage-container mt-4">
        <div class="homepage-item" [routerLink]="'/formulario'">
            <div class="homepage-background" style="background-image: url('https://i.blogs.es/5c3d68/forms/1366_2000.jpg')"></div>
            <div class="homepage-text">¡Comienza rellenado el formulario!</div>
        </div>

        <div class="homepage-item" [routerLink]="'/home/verPlan'">
            <div class="homepage-background" style="background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7B6QpTrl8GXxvW5MoxhS8Vrh4KEh8U_3kVw&s')"></div>
            <div class="homepage-text">Plan de Seguridad</div>
        </div>
    </div>
</ng-container>
  

<ng-container *ngIf="usuario.rol == 3">
</ng-container>

<div *ngIf="viewPerfil">
    <app-editar-perfil (res)="cerrar()" [usuario]="usuario"></app-editar-perfil>
</div>


<p-dialog header="Ver Perfil" [(visible)]="perfilBusqueda" [modal]="true" [style]="{width: '40%'}" [draggable]="false" [resizable]="false" (onHide)="cerrarBusqueda()">
    <div *ngIf="selectedPerfil" class="d-flex flex-column justify-content-center align-items-center">
        <p><strong>Nombre:</strong> {{selectedPerfil.nombre}}</p>
        <p><strong>Apellidos:</strong> {{selectedPerfil.apellidos}}</p>
        <p><strong>Email:</strong> {{selectedPerfil.email}}</p>
        <p><strong>Username:</strong> {{selectedPerfil.username}}</p>
        <p><strong>Rol:</strong> {{selectedPerfil.rol}}</p>
        <p><strong>Activo:</strong> {{selectedPerfil.activo}}</p>
    </div>

    <div class="d-flex justify-content-center align-items-center mt-5">
      <p-button class="d-flex justify-content-center align-items-center button-save-form" (onClick)="cerrarBusqueda()">Cancelar</p-button>
    </div>
</p-dialog>

<ng-container *ngIf="(verDialog$ | async)">
    <p-dialog header="Formulario" [(visible)]="displayDialog" modal="true" [closable]="false">
        <p>¿Te gustaría rellenar el formulario?</p>
        <p-footer>
          <p-button type="button" pButton label="Aceptar" icon="pi pi-check" (click)="navigateToForm()"></p-button>
          <p-button type="button" pButton label="Cancelar" icon="pi pi-times" (click)="hideDialog()"></p-button>
        </p-footer>
      </p-dialog>
</ng-container>
